<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Carlos Solis - UNIR</title>
    <script src="https://js.stripe.com/v3/"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto|Open+Sans"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let primaryButtons = document.querySelectorAll(".btn-primary");
        primaryButtons.forEach((button) => {
          button.addEventListener("click", function (event) {
            event.preventDefault();

            let productName = this.parentNode.querySelector("h4").textContent;
            let productPrice =
              Number(
                this.parentNode
                  .querySelector(".item-price b")
                  .textContent.slice(1)
              ) * 100;

            fetch("/create-checkout-session", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                productName: productName,
                productPrice: productPrice,
              }),
            })
              .then((response) => response.json())
              .then((data) => {
                console.log(data.url);
                window.location.href = data.url;
              });
          });
        });
      });
    </script>
  </head>
  <body>
    <div class="container-xl">
      <div class="row">
        <div class="col-md-12">
          <h2><b>Products</b></h2>
          <div
            id="myCarousel"
            class="carousel slide"
            data-ride="carousel"
            data-interval="0"
          >
            <!-- Carousel indicators -->
            <ol class="carousel-indicators">
              <li
                data-target="#myCarousel"
                data-slide-to="0"
                class="active"
              ></li>
              <li data-target="#myCarousel" data-slide-to="1"></li>
              <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>
            <!-- Wrapper for carousel items -->
            <div class="carousel-inner">
              <div class="item carousel-item active">
                <div class="row">
                  <div class="col-sm-3">
                    <div class="thumb-wrapper">
                      <span class="wish-icon"
                        ><i class="fa fa-heart-o"></i
                      ></span>
                      <div class="thumb-content">
                        <h4>Apple iPad</h4>
                        <div class="star-rating">
                          <ul class="list-inline">
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star-o"></i>
                            </li>
                          </ul>
                        </div>
                        <p class="item-price">
                          <strike>$400.00</strike> <b>$369.00</b>
                        </p>
                        <a href="#" class="btn btn-primary">Buy</a>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="thumb-wrapper">
                      <span class="wish-icon"
                        ><i class="fa fa-heart-o"></i
                      ></span>
                      <div class="thumb-content">
                        <h4>Sony Headphone</h4>
                        <div class="star-rating">
                          <ul class="list-inline">
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star-o"></i>
                            </li>
                          </ul>
                        </div>
                        <p class="item-price">
                          <strike>$25.00</strike> <b>$23.99</b>
                        </p>
                        <a href="#" class="btn btn-primary">Buy</a>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="thumb-wrapper">
                      <span class="wish-icon"
                        ><i class="fa fa-heart-o"></i
                      ></span>
                      <div class="thumb-content">
                        <h4>Macbook Air</h4>
                        <div class="star-rating">
                          <ul class="list-inline">
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star-half-o"></i>
                            </li>
                          </ul>
                        </div>
                        <p class="item-price">
                          <strike>$899.00</strike> <b>$649.00</b>
                        </p>
                        <a href="#" class="btn btn-primary">Buy</a>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="thumb-wrapper">
                      <span class="wish-icon"
                        ><i class="fa fa-heart-o"></i
                      ></span>
                      <div class="thumb-content">
                        <h4>Nikon DSLR</h4>
                        <div class="star-rating">
                          <ul class="list-inline">
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star-o"></i>
                            </li>
                            <li class="list-inline-item">
                              <i class="fa fa-star-o"></i>
                            </li>
                          </ul>
                        </div>
                        <p class="item-price">
                          <strike>$315.00</strike> <b>$250.00</b>
                        </p>
                        <a href="#" class="btn btn-primary">Buy</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Carousel controls -->
            <a
              class="carousel-control-prev"
              href="#myCarousel"
              data-slide="prev"
            >
              <i class="fa fa-angle-left"></i>
            </a>
            <a
              class="carousel-control-next"
              href="#myCarousel"
              data-slide="next"
            >
              <i class="fa fa-angle-right"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
